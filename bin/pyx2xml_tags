#!/usr/bin/env perl

# Pragmas.
use strict;
use warnings;

# Modules.
use PYX::Write::Tags;
use Tags::Output::Indent;

# Arguments.
if (@ARGV < 1) {
	print STDERR "Usage: $0 [filename] [-]\n";
	print STDERR "\tfilename\tprocess on filename\n";
	print STDERR "\t-\t\tprocess on stdin\n";
	exit 1;
}
my $filename_or_stdin = $ARGV[0];

# Tags object.
my $tags = Tags::Output::Indent->new(
	'output_handler' => \*STDOUT,
);

# PYX::Write::Tags object.
my $writer = PYX::Write::Tags->new(
	'tags_obj' => $tags,
);

# Parse from stdin.
if ($filename_or_stdin eq '-') {
	$writer->parse_handler(\*STDIN);

# Parse file.
} else {
	$writer->parse_file($filename_or_stdin);
}

$tags->flush;
print "\n";
